#!/bin/bash

extra_packages="otf-fira-mono otf-fira-code fish adapta-gtk-theme arc-gtk-theme \
syncthing chrome-gnome-shell"


# System settings
if [[ -x /usr/bin/pacman ]]; then
	echo "Extra packages installation"
	sudo pacman -S ${extra_packages}
fi


# User settings
echo "Gnome setting via dconf"
for conf in `ls ${HOME}/.config/dconf/settings/*.dconf`; do
	# This is fugly!!!
	basename=$(basename ${conf})
	filename="${basename%.*}"
	path=$(echo ${filename} | sed -e 's/\./\//g')

	echo "  * injecting '${conf}' into '/${path}/' "
	dconf load /${path}/ < ${conf} 
done

systemctl --user enable systemd-tmpfiles-setup.service systemd-tmpfiles-clean.timer
systemctl --user enable --now backup-wallpapers.timer
systemctl --user enable --now cache_clean.timer
